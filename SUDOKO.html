<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CHARU"S Sudoku </title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#7c3aed;--muted:#94a3b8;--good:#10b981;--bad:#ef4444}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#071029 0%, #081229 60%);color:#e6eef8}
    .wrap{max-width:980px;margin:28px auto;padding:24px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:14px;box-shadow:0 6px 30px rgba(2,6,23,0.7)}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px}
    h1{margin:0;font-size:20px;display:flex;gap:10px;align-items:center}
    h1 .logo{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:700}
    .controls{display:flex;gap:10px;align-items:center}
    select,input[type=range]{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:6px 8px;border-radius:8px}
    button.btn{background:var(--accent);border:none;padding:8px 12px;border-radius:10px;color:white;font-weight:600;cursor:pointer}
    .main{display:flex;gap:20px;margin-top:20px}
    .board-wrap{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:12px}
    .grid{width:540px;height:540px;display:grid;grid-template-columns:repeat(9,1fr);grid-template-rows:repeat(9,1fr);gap:0;border-radius:8px;overflow:hidden}
    .cell{border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;font-size:20px;position:relative;cursor:pointer;user-select:none}
    /* bolder lines for 3x3 blocks */
    .cell:nth-child(3n){border-right:2px solid rgba(255,255,255,0.08)}
    .cell:nth-child(n+19):nth-child(-n+27),
    .cell:nth-child(n+46):nth-child(-n+54){border-bottom:2px solid rgba(255,255,255,0.08)}
    .cell[data-fixed="true"]{background:rgba(255,255,255,0.02);font-weight:700;color:#e6eef8}
    .cell[data-conflict="true"]{background:linear-gradient(90deg, rgba(239,68,68,0.12), rgba(239,68,68,0.05));border-color:rgba(239,68,68,0.5)}
    .cell.selected{outline:3px solid rgba(124,58,237,0.18)}
    .cell .pencil{position:absolute;inset:6px;font-size:10px;display:grid;grid-template-columns:repeat(3,1fr);gap:2px;color:rgba(255,255,255,0.45)}
    .cell .value{font-size:22px}
    aside{flex:1;display:flex;flex-direction:column;gap:12px}
    .pad{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .num{background:rgba(255,255,255,0.03);padding:12px;border-radius:8px;text-align:center;cursor:pointer;border:1px solid rgba(255,255,255,0.03)}
    .num:hover{transform:translateY(-3px)}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap}
    .meta{display:flex;gap:12px;align-items:center;color:var(--muted)}
    .small{font-size:13px;color:var(--muted)}
    .status{padding:10px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}
    footer{margin-top:16px;display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:13px}
    @media (max-width:920px){.main{flex-direction:column}.grid{width:360px;height:360px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1><span class="logo">S</span> CHARU'S Sudoku</h1>
      <div class="controls">
        <label class="small">Difficulty</label>
        <select id="difficulty">
          <option value="easy">Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
        </select>
        <label class="small">Remove %</label>
        <input id="removal" type="range" min="35" max="65" value="45" />
        <button id="newBtn" class="btn">New Puzzle</button>
      </div>
    </header>

    <div class="main">
      <div class="board-wrap">
        <div id="grid" class="grid" aria-label="sudoku-grid"></div>
      </div>

      <aside>
        <div class="status">
          <div class="meta"><strong>Timer:</strong> <span id="timer">00:00</span></div>
          <div class="meta"><strong>Hints left:</strong> <span id="hints">3</span></div>
          <div class="meta"><strong>Notes:</strong> Click <em>Notes</em> button to toggle pencil mode.</div>
        </div>

        <div class="toolbar">
          <button id="solveBtn" class="btn">Solve</button>
          <button id="hintBtn" class="btn">Hint</button>
          <button id="undoBtn" class="btn">Undo</button>
          <button id="notesBtn" class="btn">Notes</button>
          <button id="eraseBtn" class="btn">Erase</button>
        </div>

        <div class="pad" id="pad" role="group" aria-label="number-pad">
          <!-- numbers injected by JS -->
        </div>

        <div class="small">Tips: Click a cell, press number keys, toggle Notes for pencil marks. Conflicting cells highlight red. Enjoy!</div>
      </aside>
    </div>

    <footer>
      <div>Made with CHARUMATHI B IT</div>
      
    </footer>
  </div>

  <script>
    // Sudoku generator + UI — compact but full-featured
    const gridEl = document.getElementById('grid');
    const padEl = document.getElementById('pad');
    const newBtn = document.getElementById('newBtn');
    const difficulty = document.getElementById('difficulty');
    const removal = document.getElementById('removal');
    const timerEl = document.getElementById('timer');
    const hintsEl = document.getElementById('hints');
    const solveBtn = document.getElementById('solveBtn');
    const hintBtn = document.getElementById('hintBtn');
    const undoBtn = document.getElementById('undoBtn');
    const notesBtn = document.getElementById('notesBtn');
    const eraseBtn = document.getElementById('eraseBtn');

    let board = Array.from({length:9},()=>Array(9).fill(0));
    let solution = null;
    let fixed = Array.from({length:9},()=>Array(9).fill(false));
    let selected = {r:null,c:null};
    let notesMode = false;
    let pencil = Array.from({length:9},()=>Array.from({length:9},()=>new Set()));
    let history = [];

    // Timer
    let startTime=null, timerInterval=null;
    function startTimer(){startTime=Date.now();clearInterval(timerInterval);timerInterval=setInterval(()=>{
      const s=Math.floor((Date.now()-startTime)/1000);timerEl.textContent=String(Math.floor(s/60)).padStart(2,'0')+":"+String(s%60).padStart(2,'0');
    },250)}
    function resetTimer(){clearInterval(timerInterval);timerEl.textContent='00:00';startTime=null}

    // create grid cells
    function makeCells(){gridEl.innerHTML='';for(let r=0;r<9;r++){for(let c=0;c<9;c++){const cell=document.createElement('div');cell.className='cell';cell.dataset.r=r;cell.dataset.c=c;cell.tabIndex=0;cell.addEventListener('click',()=>selectCell(r,c));cell.addEventListener('keydown',e=>onCellKey(e,r,c));const val=document.createElement('div');val.className='value';cell.appendChild(val);const p=document.createElement('div');p.className='pencil';cell.appendChild(p);gridEl.appendChild(cell)}}}

    function render(){for(let r=0;r<9;r++){for(let c=0;c<9;c++){const idx=r*9+c;const el=gridEl.children[idx];el.classList.remove('selected');el.dataset.fixed=fixed[r][c];const v=board[r][c];el.querySelector('.value').textContent=v||''; // pencil marks
      const pEl=el.querySelector('.pencil');pEl.innerHTML='';if(!v && pencil[r][c].size){for(let i=1;i<=9;i++){const t=document.createElement('div');t.textContent=pencil[r][c].has(i)?i:'';pEl.appendChild(t)}}
      // conflict check
      el.dataset.conflict=hasConflictAt(r,c)?'true':'false';
    }}if(selected.r!==null){const idx=selected.r*9+selected.c;gridEl.children[idx].classList.add('selected')}
    updatePadHighlight();
  }

    // conflict detection
    function hasConflictAt(r,c){const v=board[r][c];if(!v) return false; // check row
      for(let j=0;j<9;j++){if(j!==c && board[r][j]===v) return true}
      for(let i=0;i<9;i++){if(i!==r && board[i][c]===v) return true}
      const br=Math.floor(r/3)*3, bc=Math.floor(c/3)*3;for(let i=br;i<br+3;i++){for(let j=bc;j<bc+3;j++){if(!(i===r && j===c) && board[i][j]===v) return true}}
      return false}

    // selection
    function selectCell(r,c){selected={r,c};render();}

    // number pad
    function makePad(){padEl.innerHTML='';for(let n=1;n<=9;n++){const b=document.createElement('div');b.className='num';b.textContent=n;b.addEventListener('click',()=>onNumber(n));padEl.appendChild(b)}const erase=document.createElement('div');erase.className='num';erase.textContent='⌫';erase.addEventListener('click',()=>eraseCell());padEl.appendChild(erase)}

    function updatePadHighlight(){const all=padEl.children;for(let i=0;i<9;i++){all[i].style.opacity='1'} }

    function onNumber(n){if(selected.r===null) return;const r=selected.r,c=selected.c;if(fixed[r][c])return; if(notesMode){if(pencil[r][c].has(n)) pencil[r][c].delete(n); else pencil[r][c].add(n); history.push({type:'note',r,c,n}); render(); return}
      // normal mode set
      const prev=board[r][c];board[r][c]=n; pencil[r][c].clear(); history.push({type:'set',r,c,prev}); render();}

    function eraseCell(){if(selected.r===null) return;const r=selected.r,c=selected.c;if(fixed[r][c])return; const prev=board[r][c];board[r][c]=0; pencil[r][c].clear(); history.push({type:'set',r,c,prev}); render();}

    function onCellKey(e,r,c){if(e.key>='1' && e.key<='9'){onNumber(Number(e.key))} else if(e.key==='Backspace' || e.key==='Delete'){eraseCell()} else if(e.key==='h' || e.key==='H'){doHint()} }

    // undo
    function undo(){if(!history.length) return;const h=history.pop();if(h.type==='set'){board[h.r][h.c]=h.prev;pencil[h.r][h.c].clear()}else if(h.type==='note'){if(pencil[h.r][h.c].has(h.n)) pencil[h.r][h.c].delete(h.n); else pencil[h.r][h.c].add(h.n)}render()}

    // solver (backtracking)
    function findEmpty(b){for(let i=0;i<9;i++){for(let j=0;j<9;j++){if(b[i][j]===0) return [i,j]}}return null}
    function isSafe(b,r,c,v){for(let i=0;i<9;i++){if(b[r][i]===v) return false; if(b[i][c]===v) return false}
      const br=Math.floor(r/3)*3, bc=Math.floor(c/3)*3;for(let i=br;i<br+3;i++)for(let j=bc;j<bc+3;j++)if(b[i][j]===v) return false; return true}
    function solveBacktrack(b){const spot=findEmpty(b); if(!spot) return true; const [r,c]=spot; for(let v=1;v<=9;v++){if(isSafe(b,r,c,v)){b[r][c]=v; if(solveBacktrack(b)) return true; b[r][c]=0}} return false}
    function solveBoard(){const copy=board.map(r=>r.slice());const ok=solveBacktrack(copy); if(ok) return copy; return null}

    // generator: create full board then remove
    function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}return arr}
    function fillDiagonal(b){for(let k=0;k<3;k++){const nums=shuffle([1,2,3,4,5,6,7,8,9]); for(let i=0;i<3;i++) for(let j=0;j<3;j++) b[k*3+i][k*3+j]=nums[i*3+j]}}
    function fillRemaining(b,r,c){if(c>=9){r++;c=0} if(r>=9) return true; if(b[r][c]!==0) return fillRemaining(b,r,c+1); for(let num=1;num<=9;num++){if(isSafe(b,r,c,num)){b[r][c]=num; if(fillRemaining(b,r,c+1)) return true; b[r][c]=0}} return false}
    function generateFull(){let b=Array.from({length:9},()=>Array(9).fill(0)); fillDiagonal(b); fillRemaining(b,0,0); return b}

    function removeNumbers(b,percent){const total=81; const toRemove=Math.round(total*(percent/100)); let removed=0; const attempts=1000; let tries=0; while(removed<toRemove && tries<attempts){tries++; const r=Math.floor(Math.random()*9), c=Math.floor(Math.random()*9); if(b[r][c]===0) continue; const backup=b[r][c]; b[r][c]=0; // check uniqueness by trying to count solutions (stop after 2)
        const copy=b.map(row=>row.slice()); let solutions=0;
        function countSol(bb){if(solutions>1) return; const spot=findEmpty(bb); if(!spot){solutions++; return} const [rr,cc]=spot; for(let v=1;v<=9;v++){if(isSafe(bb,rr,cc,v)){bb[rr][cc]=v; countSol(bb); bb[rr][cc]=0; if(solutions>1) return}}}
        countSol(copy);
        if(solutions!==1){b[r][c]=backup}else{removed++}
    }
    return b}

    // UI actions
    function newPuzzle(){resetTimer(); history=[]; pencil=Array.from({length:9},()=>Array.from({length:9},()=>new Set())); const full=generateFull(); solution=full.map(r=>r.slice()); // deep copy
      let perc = Number(removal.value); // let difficulty tweak
      const b=full.map(r=>r.slice()); const puzzle=removeNumbers(b,perc); board=puzzle.map(r=>r.slice()); fixed=board.map(r=>r.map(v=>v!==0)); render(); startTimer(); hintsEl.textContent='3';}

    function doSolve(){if(!solution) return; board=solution.map(r=>r.slice()); render();}

    function doHint(){let hintsLeft=Number(hintsEl.textContent); if(hintsLeft<=0) return alert('No hints left'); // find an empty or wrong cell
      // prefer empty correct cell
      for(let i=0;i<9;i++){for(let j=0;j<9;j++){if(!fixed[i][j] && board[i][j]===0){history.push({type:'set',r:i,c:j,prev:0}); board[i][j]=solution[i][j]; hintsLeft--; hintsEl.textContent=hintsLeft; render(); return}}}
      // if none empty, reveal one incorrect
      for(let i=0;i<9;i++){for(let j=0;j<9;j++){if(!fixed[i][j] && board[i][j]!==solution[i][j]){history.push({type:'set',r:i,c:j,prev:board[i][j]}); board[i][j]=solution[i][j]; hintsLeft--; hintsEl.textContent=hintsLeft; render(); return}}}
      alert('No hints found — puzzle may be complete')}

    // keyboard shortcuts
    document.addEventListener('keydown',e=>{if(e.key>='1' && e.key<='9'){onNumber(Number(e.key))}else if(e.key==='Backspace' || e.key==='Delete'){eraseCell()}else if(e.key==='h' || e.key==='H'){doHint()}else if(e.key==='n' || e.key==='N'){newPuzzle()}})

    // attach buttons
    newBtn.addEventListener('click',()=>{newPuzzle()}); solveBtn.addEventListener('click',doSolve); hintBtn.addEventListener('click',doHint); undoBtn.addEventListener('click',undo);
    notesBtn.addEventListener('click',()=>{notesMode=!notesMode; notesBtn.textContent = notesMode? 'Notes ✓' : 'Notes'});
    eraseBtn.addEventListener('click',eraseCell);

    // init
    makeCells(); makePad(); newPuzzle();
  </script>
</body>
</html>
